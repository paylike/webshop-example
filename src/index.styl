$color-contrast = #0066FF;

grid( $columns, $gutter )
	list-style-type none
	padding 0

	margin-left (- $gutter)
	margin-right (- $gutter)

	li
		$width = 100 / $columns

		margin 0 $gutter 2 * $gutter $gutter
		width "calc(%s% - %s)" % ($width 2 * $gutter)


*
	box-sizing border-box
	margin 0

* + *
	margin-top .8em

html
	height 100%
	min-height 100%
	overflow-y scroll

body
	min-height 100%
	margin 0 auto
	max-width 70em
	background #EFF0F1
	color #333
	font-family "Helvetica Neue", Helvetica, Arial, sans-serif
	font-weight 300
	font-size 14px
	line-height 1.2
	text-align center

	display flex
	flex-flow column nowrap

	> *
		margin-left 2%
		margin-right 2%

p
	line-height 1.5

a
	font-weight bold
	color inherit
	text-decoration none

	&:hover
		text-decoration underline

img
	max-width 100%

header
	margin-top 4%
	margin-top 2.8em
	margin-bottom 5%
	margin-bottom 3.5em

	display flex
	flex-flow row wrap
	justify-content space-between
	align-items flex-end

	> *
		margin 0

	a.logo
		display block
		font-weight 100
		font-size 2em
		align-self center

		&:hover
			text-decoration none

		img
			display block
			width 5em

	div.basket
		display block

		> a
			box-sizing content-box
			position relative
			display block
			color $color-contrast
			text-indent -9999999px
			background url('./images/basket.svg') 50% 50% / 60% auto no-repeat
			width 27px
			height 25px
			padding 1em

			span.count
				text-indent 0
				position absolute
				font-size .75em
				display block
				color white
				background $color-contrast
				border-radius 50%
				height 1.5em
				padding 0 .45em 0 .45em
				top .75em
				right .75em

				display flex
				flex-flow row nowrap
				justify-content center
				align-items center
				text-align center

		&.empty
			> a
				pointer-events none
				color #333

				span.count
				div.popup
					display none
		&.empty
		&.closed
			div.popup
				display none

		// show popup relative to here
		@media all and (min-width 40em)
			position relative

			div.popup
				width 25em
				top 4.5em
				right -1.4em
				left auto

main
	flex 1 1 auto

	ul.products
		margin-left 0
		margin-right 0

		display flex
		flex-flow row wrap
		justify-content flex-start

		text-align left

		li
			overflow hidden
			border-radius 3px
			box-shadow 0 2px 4px 0 rgba(0, 0, 0, .05)
			background white

			display flex
			flex-flow column nowrap
			justify-content space-between

			div.img
				flex 1 1 auto
				display flex
				justify-content center
				align-items center

			div.text
				display flex
				flex-flow column nowrap
				justify-content flex-end

			h1
				color #333
				font-weight inherit
				font-size 1.5em
				margin-bottom auto

			img
				display block
				width 100%

			h1 + p
				margin-top .5em

			p.price
				line-height 1

			p.sku
				display none

			a.buy
				margin-top auto
				display block
				color $color-contrast
				font-weight 400

				text-indent -9999999px
				background url('./images/basket-add.svg') 100% 100% / 75% auto no-repeat
				width 27px
				height 30px
				padding 1em 0 0 1em
				box-sizing content-box
				opacity .7

				&:hover
					opacity 1

			div.content
				margin 0
				padding 8%
				padding 1.65em
				color #999

				display flex
				flex-flow row nowrap
				justify-content space-between
				align-items stretch

	ul.products
		grid(1, 1em)

	ul.products[gt1]
		grid(2, 1em)

		@media all and (min-width 40em)
			grid(2, 1.5em)

	ul.products[gt2]
		@media all and (min-width 50em)
			grid(3, 1em)

		@media all and (min-width 60em)
			grid(3, 1.25em)

footer
	margin-bottom 2.8em
	color #999

div.payment-methods
	display flex
	flex-flow row wrap
	justify-content center

	img
		display block
		margin 0 .5em
		height 20px
		border-radius 4px

div.popup
	position absolute
	max-width 30em
	margin auto
	left 0
	right 0
	top 50%
	border-radius 3px
	color #333
	box-shadow 0 5px 30px 0 rgba(0, 0, 0, .3)
	z-index 999

	&::before
		content ''
		position absolute
		top -.65em
		width 0
		height 0
		border-left .65em solid transparent
		border-right .65em solid transparent
		border-bottom .65em solid white
		right 10%

	> *
		margin 0

	> *:first-child
		border-top-left-radius 3px
		border-top-right-radius 3px
		overflow hidden

	> *:last-child
		border-bottom-left-radius 3px
		border-bottom-right-radius 3px
		overflow hidden

	ul.lines
		margin 0
		padding 0
		list-style-type none

		> li
			display flex
			flex-flow row nowrap
			align-items stretch
			background white

			font-size .75em

			margin 0
			padding 2em

			> *
				margin 0

			div.img
				flex 1 1 25%

				img
					display block
					border-radius 3px
					width 100%

			div.body
				flex 1 1 auto
				padding-left 1.5em

				display flex
				flex-flow row wrap
				justify-content space-between
				align-items flex-end

				h1
					width 100%
					margin-bottom auto
					font-weight 300

				div.quantity
					font-size 1.25em
					border 1px solid #ddd
					border-radius 3px
					max-width 6em

					display flex
					flex-flow row nowrap
					justify-content space-between

					> *
						margin 0

					input
					button
						text-align center
						font-size inherit
						background none
						border none
						appearance none
						line-height 1
						height 1.5em

					button
						flex 0 0 1.2em
						font-size 1.5em
						cursor pointer
						padding 0

					button.less
						padding-left .3em

					button.more
						padding-right .3em

					div
						flex 1 1 1em

					input
						width 100%
						height 2.3em

					button.less
						color red

					button.more
						color $color-contrast

				p.amount
					font-weight 600

	div.summary
		font-size 1.25em
		background #F1F1F1

		padding 1.2em

		display flex
		flex-flow row nowrap
		justify-content space-between

		> *
			line-height 1
			margin 0

		p.amount
			font-weight 500

	button.checkout
		font-size 1em
		padding 1.5em
		width 100%

		background #0166FF
		color white
		text-transform uppercase
		border none
		appearance none
		font-weight 500
		cursor pointer

@media all and (min-width 60em)
	body
		text-align left

	footer
		position relative

		div.payment-methods
			position absolute
			right 0
			bottom 0
